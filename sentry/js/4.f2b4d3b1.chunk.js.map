{"version":3,"sources":["assets/img/1.jpg","assets/img/2.jpg","assets/img/3.jpg","assets/img/4.jpg","assets/img/5.jpg","assets/img/6.jpg","page/home/home.jsx"],"names":["module","exports","Hls","require","Live","props","state","testUrl","liveUrl","hls","fullScreen","showPlayIcon","imgList","img1","img2","img3","img4","img5","img6","loading","videoRef","React","createRef","this","getStream","console","log","isSupported","loadSource","attachMedia","current","on","Events","MANIFEST_PARSED","addEventListener","setState","play","muted","err","window","location","reload","ERROR","event","data","className","spinning","onClick","changeFullScreen","ref","autoplay","map","item","i","key","src","alt","Component"],"mappings":"uHAAAA,EAAOC,QAAU,IAA0B,+B,mBCA3CD,EAAOC,QAAU,IAA0B,+B,mBCA3CD,EAAOC,QAAU,IAA0B,+B,mBCA3CD,EAAOC,QAAU,IAA0B,+B,mBCA3CD,EAAOC,QAAU,IAA0B,+B,mBCA3CD,EAAOC,QAAU,IAA0B,+B,gQCSvCC,EAAMC,EAAQ,IAEGC,E,kDACnB,WAAYC,GAAQ,IAAD,8BACjB,cAAMA,IACDC,MAAQ,CACXC,QAAS,oDACTC,QAAS,yCACTC,IAAK,GACLC,YAAY,EACZC,cAAc,EACdC,QAAS,CACPC,IAAMC,IACNC,IAAMC,IACNC,IAAMC,KAIRC,SAAS,GAEX,EAAKC,SAAWC,IAAMC,YAjBL,E,gEAoBjBC,KAAKC,YACLC,QAAQC,IAAI,oBAAqBH,KAAKH,Y,kCAG3B,IAAD,OACNlB,EAAIyB,gBACNJ,KAAKd,IAAM,IAAIP,EACfqB,KAAKd,IAAImB,WAAWL,KAAKjB,MAAME,SAC/Be,KAAKd,IAAIoB,YAAYN,KAAKH,SAASU,SACnCP,KAAKd,IAAIsB,GAAG7B,EAAI8B,OAAOC,iBAAiB,WACtCR,QAAQC,IAAI,4BACZ,EAAKN,SAASU,QAAQI,iBAAiB,kBAAkB,WACvDT,QAAQC,IAAI,4BACZ,EAAKS,SAAS,CACZhB,SAAS,IAEX,IACE,EAAKC,SAASU,QAAQM,OACtB,EAAKhB,SAASU,QAAQO,OAAQ,EAC9B,MAAOC,GACPb,QAAQC,IAAI,oDACZa,OAAOC,SAASC,aAGpB,EAAKrB,SAASU,QAAQI,iBAAiB,QAAQ,WAC7C,EAAKC,SAAS,CACZxB,cAAc,OAGlB,EAAKS,SAASU,QAAQI,iBAAiB,SAAS,WAE9C,EAAKC,SAAS,CACZxB,cAAc,UAIpBY,KAAKd,IAAIsB,GAAG7B,EAAI8B,OAAOU,OAAO,SAACC,EAAOC,GAGpCnB,QAAQC,IAAI,kC,yCAKhBH,KAAKY,SAAS,CACZzB,YAAaa,KAAKjB,MAAMI,e,+BAGlB,IAAD,OACP,OAAO,yBAAKmC,UAAU,aACpB,yBAAKA,UAAU,YACb,mMACA,kBAAC,IAAD,CAAMC,SAAUvB,KAAKjB,MAAMa,SACzB,uBAAG0B,UAAU,cAActB,KAAKjB,MAAMa,QAAU,iCAAU,wBAG9D,yBAAK0B,UAAWtB,KAAKjB,MAAMI,WAAa,iBAAmB,QACzD,yBAAKmC,UAAWtB,KAAKjB,MAAMI,WAAa,cAAgB,IACtD,yBAAKmC,UAAU,iBAEXtB,KAAKjB,MAAMK,cACX,yBAAKkC,UAAU,aAAaE,QAAS,WAAQ,EAAK3B,SAASU,QAAQM,SACjE,uBAAGS,UAAU,wBAGjB,yBAAKA,UAAU,sBAAsBE,QAAS,WAAQ,EAAKC,qBAEvDzB,KAAKjB,MAAMI,WAAa,uBAAGmC,UAAU,yBACjC,uBAAGA,UAAU,2BAIvB,2BAEEA,UAAU,aAEVI,IAAK1B,KAAKH,SAAUiB,OAAK,MAI/B,yBAAKQ,UAAU,eACb,6GACA,kDAEF,yBAAKA,UAAU,eACb,gHACA,kBAAC,IAAD,CAAUK,UAAQ,GAEd3B,KAAKjB,MAAMM,QAAQuC,KAAI,SAACC,EAAMC,GAC5B,OAAO,yBAAKC,IAAKD,GACf,yBAAKE,IAAKH,EAAMI,IAAI,6BAM9B,yBAAKX,UAAU,gBACb,kYAEA,oT,GAxH0BxB,IAAMoC","file":"static/js/4.f2b4d3b1.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/1.21cea89d.jpg\";","module.exports = __webpack_public_path__ + \"static/media/2.45d26a3f.jpg\";","module.exports = __webpack_public_path__ + \"static/media/3.cece483f.jpg\";","module.exports = __webpack_public_path__ + \"static/media/4.244d38f4.jpg\";","module.exports = __webpack_public_path__ + \"static/media/5.5a93e437.jpg\";","module.exports = __webpack_public_path__ + \"static/media/6.cb2d583d.jpg\";","import React from 'react'\r\nimport './home.scss'\r\nimport { Carousel, Spin } from 'antd';\r\nimport img1 from '../../assets/img/1.jpg'\r\nimport img2 from '../../assets/img/2.jpg'\r\nimport img3 from '../../assets/img/3.jpg'\r\nimport img4 from '../../assets/img/4.jpg'\r\nimport img5 from '../../assets/img/5.jpg'\r\nimport img6 from '../../assets/img/6.jpg'\r\nlet Hls = require('hls.js')\r\n\r\nexport default class Live extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      testUrl: 'https://test-streams.mux.dev/x36xhzz/x36xhzz.m3u8',\r\n      liveUrl: 'http://47.100.199.95:8080/hls/app.m3u8',\r\n      hls: '',\r\n      fullScreen: false,\r\n      showPlayIcon: false,\r\n      imgList: [\r\n        img1, img2,\r\n        img3, img4,\r\n        img5, img6\r\n        // '../../assets/img/1.jpg', '@/assets/img/1.jpg', '@/assets/img/1.jpg',\r\n        // '@/assets/img/4.jpg','@/assets/img/5.jpg','@/assets/img/6.jpg',\r\n      ],\r\n      loading: true\r\n    }\r\n    this.videoRef = React.createRef()\r\n  }\r\n  componentDidMount() {\r\n    this.getStream()\r\n    console.log('componentDidMount', this.videoRef)\r\n  }\r\n\r\n  getStream() {\r\n    if (Hls.isSupported()) {\r\n      this.hls = new Hls();\r\n      this.hls.loadSource(this.state.liveUrl);\r\n      this.hls.attachMedia(this.videoRef.current);\r\n      this.hls.on(Hls.Events.MANIFEST_PARSED, () => {\r\n        console.log('加载成功');\r\n        this.videoRef.current.addEventListener('canplaythrough', () => {\r\n          console.log('加载完成')\r\n          this.setState({\r\n            loading: false\r\n          })\r\n          try {\r\n            this.videoRef.current.play();\r\n            this.videoRef.current.muted = false\r\n          } catch (err) {\r\n            console.log('捕捉错误重新加载')\r\n            window.location.reload()\r\n          }\r\n        })\r\n        this.videoRef.current.addEventListener('play', () => {\r\n          this.setState({\r\n            showPlayIcon: false\r\n          })\r\n        })\r\n        this.videoRef.current.addEventListener('pause', () => {\r\n\r\n          this.setState({\r\n            showPlayIcon: true\r\n          })\r\n        })\r\n      });\r\n      this.hls.on(Hls.Events.ERROR, (event, data) => {\r\n        // console.log(event, data);\r\n        // 监听出错事件\r\n        console.log('加载失败');\r\n      });\r\n    }\r\n  }\r\n  changeFullScreen() {\r\n    this.setState({\r\n      fullScreen: !this.state.fullScreen\r\n    })\r\n  }\r\n  render() {\r\n    return <div className=\"live-main\">\r\n      <div className=\"live-top\">\r\n        <marquee>欢迎各位来到陈振龙--许思敏喜事现场，正在为您实时直播中</marquee>\r\n        <Spin spinning={this.state.loading} >\r\n          <p className=\"live-top-p\">{this.state.loading ? '直播连接中' : '观看中'}</p>\r\n        </Spin>\r\n      </div>\r\n      <div className={this.state.fullScreen ? 'live live-full' : 'live'}>\r\n        <div className={this.state.fullScreen ? 'live-rorate' : ''}>\r\n          <div className=\"video-contorl\">\r\n            {\r\n              this.state.showPlayIcon &&\r\n              <div className=\"video-play\" onClick={() => { this.videoRef.current.play() }}>\r\n                <i className=\"iconfont iconpause\"></i>\r\n              </div>\r\n            }\r\n            <div className=\"video-flexible--div\" onClick={() => { this.changeFullScreen() }}>\r\n              {\r\n                this.state.fullScreen ? <i className=\"iconfont iconsuoxiao\"></i>\r\n                  : <i className=\"iconfont iconfangda1\"></i>\r\n              }\r\n            </div>\r\n          </div>\r\n          <video\r\n            // src=\"//mv.eastday.com/vvideo/20200226/20200226195747659866955_1.mp4\"\r\n            className=\"live-video\"\r\n            // ref={this.videoRef} controls muted>\r\n            ref={this.videoRef} muted>\r\n          </video>\r\n        </div>\r\n      </div>\r\n      <div className=\"photos-tips\">\r\n        <p>我来爆照，前方高能，请上拉</p>\r\n        <p>哈哈哈</p>\r\n      </div>\r\n      <div className=\"live-photos\">\r\n        <span>点击白色的按钮，可切换图片</span>\r\n        <Carousel autoplay>\r\n          {\r\n            this.state.imgList.map((item, i) => {\r\n              return <div key={i}>\r\n                <img src={item} alt=\"甜蜜照\" />\r\n              </div>\r\n            })\r\n          }\r\n        </Carousel>\r\n      </div>\r\n      <div className=\"waiting-tips\">\r\n        <p>各位亲朋好友们好，由于此次服务器宽带低、和本人开发时间和能力有限，\r\n          延时比较严重，建议观看能耐心等待，可能有时需要一分钟</p>\r\n        <p>如果懂得直播技术，可以跟我讨论下，怎么优化下直播延迟，\r\n          对于其他功能不开发，最近熬夜有点严重</p>\r\n      </div>\r\n    </div>\r\n  }\r\n}"],"sourceRoot":""}