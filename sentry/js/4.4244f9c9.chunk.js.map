{"version":3,"sources":["page/home/home.jsx","assets/img/1.jpg","assets/img/2.jpg","assets/img/3.jpg","assets/img/4.jpg","assets/img/5.jpg","assets/img/6.jpg"],"names":["Hls","require","Live","props","state","testUrl","liveUrl","hls","fullScreen","showPlayIcon","imgList","img1","img2","img3","img4","img5","img6","loading","videoRef","React","createRef","this","getStream","console","log","isSupported","loadSource","attachMedia","current","on","Events","MANIFEST_PARSED","addEventListener","setState","play","muted","err","window","location","reload","ERROR","event","data","className","spinning","onClick","changeFullScreen","ref","autoplay","map","item","i","key","src","alt","Component","module","exports"],"mappings":"mVASIA,EAAMC,EAAQ,IAEGC,E,kDACnB,WAAYC,GAAQ,IAAD,8BACjB,cAAMA,IACDC,MAAQ,CACXC,QAAS,oDACTC,QAAS,yCACTC,IAAK,GACLC,YAAY,EACZC,cAAc,EACdC,QAAS,CACPC,IAAMC,IACNC,IAAMC,IACNC,IAAMC,KAIRC,SAAS,GAEX,EAAKC,SAAWC,IAAMC,YAjBL,E,gEAoBjBC,KAAKC,YACLC,QAAQC,IAAI,oBAAqBH,KAAKH,Y,kCAG3B,IAAD,OACNlB,EAAIyB,gBACNJ,KAAKd,IAAM,IAAIP,EACfqB,KAAKd,IAAImB,WAAWL,KAAKjB,MAAME,SAC/Be,KAAKd,IAAIoB,YAAYN,KAAKH,SAASU,SACnCP,KAAKd,IAAIsB,GAAG7B,EAAI8B,OAAOC,iBAAiB,WACtCR,QAAQC,IAAI,4BACZ,EAAKN,SAASU,QAAQI,iBAAiB,kBAAkB,WACvDT,QAAQC,IAAI,4BACZ,EAAKS,SAAS,CACZhB,SAAS,IAEX,IACE,EAAKC,SAASU,QAAQM,OACtB,EAAKhB,SAASU,QAAQO,OAAQ,EAC9B,MAAOC,GACPb,QAAQC,IAAI,oDACZa,OAAOC,SAASC,aAGpB,EAAKrB,SAASU,QAAQI,iBAAiB,QAAQ,WAC7C,EAAKC,SAAS,CACZxB,cAAc,OAGlB,EAAKS,SAASU,QAAQI,iBAAiB,SAAS,WAE9C,EAAKC,SAAS,CACZxB,cAAc,UAIpBY,KAAKd,IAAIsB,GAAG7B,EAAI8B,OAAOU,OAAO,SAACC,EAAOC,GAGpCnB,QAAQC,IAAI,kC,yCAKhBH,KAAKY,SAAS,CACZzB,YAAaa,KAAKjB,MAAMI,e,+BAGlB,IAAD,OACP,OAAO,yBAAKmC,UAAU,aACpB,yBAAKA,UAAU,YACb,mMACA,kBAAC,IAAD,CAAMC,SAAUvB,KAAKjB,MAAMa,SACzB,uBAAG0B,UAAU,cAActB,KAAKjB,MAAMa,QAAU,iCAAU,wBAG9D,yBAAK0B,UAAWtB,KAAKjB,MAAMI,WAAa,iBAAmB,QACzD,yBAAKmC,UAAWtB,KAAKjB,MAAMI,WAAa,cAAgB,IACtD,yBAAKmC,UAAU,iBAEXtB,KAAKjB,MAAMK,cACX,yBAAKkC,UAAU,aAAaE,QAAS,WAAQ,EAAK3B,SAASU,QAAQM,SACjE,uBAAGS,UAAU,wBAGjB,yBAAKA,UAAU,sBAAsBE,QAAS,WAAQ,EAAKC,qBAEvDzB,KAAKjB,MAAMI,WAAa,uBAAGmC,UAAU,yBACjC,uBAAGA,UAAU,2BAIvB,2BAEEA,UAAU,aAEVI,IAAK1B,KAAKH,SAAUiB,OAAK,MAI/B,yBAAKQ,UAAU,eACb,6GACA,kDAEF,yBAAKA,UAAU,eACb,gHACA,kBAAC,IAAD,CAAUK,UAAQ,GAEd3B,KAAKjB,MAAMM,QAAQuC,KAAI,SAACC,EAAMC,GAC5B,OAAO,yBAAKC,IAAKD,GACf,yBAAKE,IAAKH,EAAMI,IAAI,6BAM9B,yBAAKX,UAAU,gBACb,kYAEA,oT,GAxH0BxB,IAAMoC,Y,wCCXxCC,EAAOC,QAAU,IAA0B,+B,mBCA3CD,EAAOC,QAAU,IAA0B,+B,mBCA3CD,EAAOC,QAAU,IAA0B,+B,mBCA3CD,EAAOC,QAAU,IAA0B,+B,mBCA3CD,EAAOC,QAAU,IAA0B,+B,mBCA3CD,EAAOC,QAAU,IAA0B","file":"static/js/4.4244f9c9.chunk.js","sourcesContent":["import React from 'react'\nimport './home.scss'\nimport { Carousel, Spin } from 'antd';\nimport img1 from '../../assets/img/1.jpg'\nimport img2 from '../../assets/img/2.jpg'\nimport img3 from '../../assets/img/3.jpg'\nimport img4 from '../../assets/img/4.jpg'\nimport img5 from '../../assets/img/5.jpg'\nimport img6 from '../../assets/img/6.jpg'\nlet Hls = require('hls.js')\n\nexport default class Live extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      testUrl: 'https://test-streams.mux.dev/x36xhzz/x36xhzz.m3u8',\n      liveUrl: 'http://47.100.199.95:8080/hls/app.m3u8',\n      hls: '',\n      fullScreen: false,\n      showPlayIcon: false,\n      imgList: [\n        img1, img2,\n        img3, img4,\n        img5, img6\n        // '../../assets/img/1.jpg', '@/assets/img/1.jpg', '@/assets/img/1.jpg',\n        // '@/assets/img/4.jpg','@/assets/img/5.jpg','@/assets/img/6.jpg',\n      ],\n      loading: true\n    }\n    this.videoRef = React.createRef()\n  }\n  componentDidMount() {\n    this.getStream()\n    console.log('componentDidMount', this.videoRef)\n  }\n\n  getStream() {\n    if (Hls.isSupported()) {\n      this.hls = new Hls();\n      this.hls.loadSource(this.state.liveUrl);\n      this.hls.attachMedia(this.videoRef.current);\n      this.hls.on(Hls.Events.MANIFEST_PARSED, () => {\n        console.log('加载成功');\n        this.videoRef.current.addEventListener('canplaythrough', () => {\n          console.log('加载完成')\n          this.setState({\n            loading: false\n          })\n          try {\n            this.videoRef.current.play();\n            this.videoRef.current.muted = false\n          } catch (err) {\n            console.log('捕捉错误重新加载')\n            window.location.reload()\n          }\n        })\n        this.videoRef.current.addEventListener('play', () => {\n          this.setState({\n            showPlayIcon: false\n          })\n        })\n        this.videoRef.current.addEventListener('pause', () => {\n\n          this.setState({\n            showPlayIcon: true\n          })\n        })\n      });\n      this.hls.on(Hls.Events.ERROR, (event, data) => {\n        // console.log(event, data);\n        // 监听出错事件\n        console.log('加载失败');\n      });\n    }\n  }\n  changeFullScreen() {\n    this.setState({\n      fullScreen: !this.state.fullScreen\n    })\n  }\n  render() {\n    return <div className=\"live-main\">\n      <div className=\"live-top\">\n        <marquee>欢迎各位来到陈振龙--许思敏喜事现场，正在为您实时直播中</marquee>\n        <Spin spinning={this.state.loading} >\n          <p className=\"live-top-p\">{this.state.loading ? '直播连接中' : '观看中'}</p>\n        </Spin>\n      </div>\n      <div className={this.state.fullScreen ? 'live live-full' : 'live'}>\n        <div className={this.state.fullScreen ? 'live-rorate' : ''}>\n          <div className=\"video-contorl\">\n            {\n              this.state.showPlayIcon &&\n              <div className=\"video-play\" onClick={() => { this.videoRef.current.play() }}>\n                <i className=\"iconfont iconpause\"></i>\n              </div>\n            }\n            <div className=\"video-flexible--div\" onClick={() => { this.changeFullScreen() }}>\n              {\n                this.state.fullScreen ? <i className=\"iconfont iconsuoxiao\"></i>\n                  : <i className=\"iconfont iconfangda1\"></i>\n              }\n            </div>\n          </div>\n          <video\n            // src=\"//mv.eastday.com/vvideo/20200226/20200226195747659866955_1.mp4\"\n            className=\"live-video\"\n            // ref={this.videoRef} controls muted>\n            ref={this.videoRef} muted>\n          </video>\n        </div>\n      </div>\n      <div className=\"photos-tips\">\n        <p>我来爆照，前方高能，请上拉</p>\n        <p>哈哈哈</p>\n      </div>\n      <div className=\"live-photos\">\n        <span>点击白色的按钮，可切换图片</span>\n        <Carousel autoplay>\n          {\n            this.state.imgList.map((item, i) => {\n              return <div key={i}>\n                <img src={item} alt=\"甜蜜照\" />\n              </div>\n            })\n          }\n        </Carousel>\n      </div>\n      <div className=\"waiting-tips\">\n        <p>各位亲朋好友们好，由于此次服务器宽带低、和本人开发时间和能力有限，\n          延时比较严重，建议观看能耐心等待，可能有时需要一分钟</p>\n        <p>如果懂得直播技术，可以跟我讨论下，怎么优化下直播延迟，\n          对于其他功能不开发，最近熬夜有点严重</p>\n      </div>\n    </div>\n  }\n}","module.exports = __webpack_public_path__ + \"static/media/1.21cea89d.jpg\";","module.exports = __webpack_public_path__ + \"static/media/2.45d26a3f.jpg\";","module.exports = __webpack_public_path__ + \"static/media/3.cece483f.jpg\";","module.exports = __webpack_public_path__ + \"static/media/4.244d38f4.jpg\";","module.exports = __webpack_public_path__ + \"static/media/5.5a93e437.jpg\";","module.exports = __webpack_public_path__ + \"static/media/6.cb2d583d.jpg\";"],"sourceRoot":""}